#summary One-sentence summary of this page.

= Introduction =

Hello, I'm Leo, a.k.a a14331990. This page contains detailed information about building 
a working MinGW GCC 4.5.0 for wxWidgets.

= Details =

*Build gmp, mpfr and other denpedencies*
  * gmp
  CFLAGS=-O2 CPPFLAGS=-fexceptions ./configure \

  --prefix=/mingw \

  --disable-static \

  --enable-shared \

  --enable-cxx
  * mpfr
  CFLAGS=-O2 ./configure \

  --prefix=/mingw \

  --disable-static \

  --enable-shared
  * mpc
CFLAGS=-O2 ./configure \

  --prefix=/mingw \

  --disable-static \

  --enable-shared
  * ppl

  CFLAGS=-O2 LDFLAGS="-no-undefined -Wl,--exclude-libs,libgcc_eh.a" ./configure \

  --prefix=/mingw \

  --disable-watchdog \

  --disable-static \

  --enable-shared
  * cloog

  CFLAGS=-O2 LDFLAGS="-no-undefined" ./configure \

  --prefix=/mingw \

  --disable-static \

  --enable-shared \

  --with-ppl
  * pthreads

  make clean GC-static

  cp libpthreadGC2.a /mingw/lib/libpthreadGC2-static.a

  make clean GC-inlined

  cp libpthreadGC2.a /mingw/lib/libpthread.a

  cp pthreadGC2.dll /mingw/bin/pthreadGC2.dll

  make clean GCE-inlined

  cp libpthreadGCE2.a /mingw/lib/libpthreadGCE2.a

  cp pthreadGCE2.dll /mingw/bin/pthreadGCE2.dll

  cp pthread.h /mingw/include/pthread.h

  cp semaphore.h /mingw/include/semaphore.h

  cp sched.h /mingw/include/sched.h
  some *notes and warnings*:
  * backup your working mingw environment first,
  * before building, copy mingw32 dir to i686-pc-mingw32 in the following locations:
    (or, add --build=mingw32 in every build configs, you can skip this step)
    cd /mingw
    cp -r mingw32 i686-pc-mingw32
    cd /mingw/lib/gcc
    cp -r mingw32 i686-pc-mingw32
    cd /mingw/libexec/gcc
    cp -r mingw32 i686-pc-mingw32
  * some libs may not built with gcc 4.5, you can build it with other version of gcc.

*Patch Binutils*
  download the tarball leo-current-patches.7z, decompress it using *latest* 7-zip, pick leo-urrent-patches/leo-patches/auto-  import.diff and patch it.
  notes
  * this comes from this post by Dave Korn and is slightly modified by me
[PATCH] Silence ld auto-import warnings for pe-i386.
http://sourceware.org/ml/binutils/2009-02/msg00341.html
  * it enables auto-import by default in ld, this is default behavior in Cygwin, but not yet in MinGW.

*Patch GCC*
  pick all other patches in the dir leo-current-patches and its sundir.
   

*Configure GCC*
../configure \

--prefix=/mingw \

--enable-languages=c,c++,fortran,objc,obj-c++ \

--enable-shared \

--disable-libgcj \

--enable-libgomp \

--disable-win32-registry \

--enable-libstdcxx-debug \

--enable-version-specific-runtime-libs \

--disable-werror \

--enable-threads \

--disable-symvers \

--enable-cxx-flags='-fno-function-sections -fno-data-sections' \

--enable-fully-dynamic-string \

--disable-nls \

--with-system-zlib \

--disable-bootstrap \

--disable-lto
Add your content here.  Format your content with:
  * Text in *bold* or _italic_
  * Headings, paragraphs, and lists
  * Automatic links to other wiki pages